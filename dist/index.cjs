"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),j=["href"],A=e.defineComponent({__name:"ontology-term-annotation.ce",props:{annotation:null},setup(t){const p=t,u=e.computed(()=>p.annotation?p.annotation.split("	")[0]:""),a=e.computed(()=>p.annotation?p.annotation.split("	")[2]:""),n=e.computed(()=>p.annotation?p.annotation.split("	")[1]:"");return(s,l)=>t.annotation&&t.annotation!=""?(e.openBlock(),e.createElementBlock("a",{key:0,href:e.unref(a),target:"_blank"},e.toDisplayString(e.unref(n))+": "+e.toDisplayString(e.unref(u)),9,j)):e.createCommentVNode("",!0)}}),R=["innerHTML"],U=e.defineComponent({__name:"ontology-text-annotation.ce",props:{annotation:null},setup(t){const p=t,u=e.computed(()=>p.annotation?p.annotation.split("$$$$")[0]:""),a=e.computed(()=>{let n=`${u.value}`,s=p.annotation?p.annotation.split("$$$$")[1].split(/\r?\n/).filter(r=>r):[],l=[];return s.forEach(r=>{let c=r.split("	"),g=c[1].split(" "),f={};f.value=n.substring(parseInt(g[1]),parseInt(g[2])),f.class=c[0],f.ontology=g[0],f.ontology_term=c[2],f.iri=c[3],l.push(f)}),l.forEach(r=>{n=n.replace(r.value,'<span class="o_term"><a target="_blank" href='+r.iri+">"+r.value+"</a></span>")}),n});return(n,s)=>(e.openBlock(),e.createElementBlock("div",{innerHTML:e.unref(a)},null,8,R))}}),H=`.o_term[data-v-922a42fb]{background-color:#cdcdcd;border-radius:4px;padding:1px 3px}
`,C=(t,p)=>{const u=t.__vccOpts||t;for(const[a,n]of p)u[a]=n;return u},F=C(U,[["styles",[H]],["__scopeId","data-v-922a42fb"]]),K={class:"auto-search-wrapper"},P={key:0},W=["onInput","placeholder"],J={key:1},G={key:2,class:"auto-results-wrapper auto-is-active"},Q={tabindex:"0",role:"listbox"},X=["onClick"],Y=["innerHTML"],Z=["innerHTML"],ee={key:3,type:"button","aria-label":"clear the search query"},te=e.defineComponent({__name:"ontology-autocomplete.ce",props:{label:{type:String,required:!1,default:""},info:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},ontologies:{type:String,required:!1,default:""},value:{type:String,required:!1,default:""},styling:{type:String,required:!1,default:""},format:{type:String,required:!1,default:"text"}},emits:["change"],setup(t,{emit:p}){const u=t,a=d=>{d==""?(l.value=null,n.value=""):(l.value=d,n.value=d.label,p("change",r.value),s.value=[])};let n=e.ref(""),s=e.ref([]),l=e.ref(null);const r=e.computed(()=>l.value?u.format&&u.format=="json"?l.value:l.value?l.value.label+"	"+l.value.ontology_prefix+"	"+l.value.iri+"	"+l.value.type:"":null);e.watch(()=>u.value,(d,i)=>{a(f(d))}),e.onMounted(()=>{u.value!=""&&a(f(u.value))});async function c(){if(n.value==="")return s.value=[],[];let d=n.value.indexOf(":"),i="",o=null;d<0?(i=u.ontologies,o=n.value):(o=n.value.split(":")[1],i=n.value.split(":")[0]);const v="https://service.tib.eu/ts4tib/api/select?q=",_=encodeURI("&ontology="+i+"&fieldList=iri,label,short_form,obo_id,ontology_name,ontology_prefix,description,type&obsoletes=false&local=false&rows=10");(await fetch(`${v}${o}${_}`)).json().then(B=>{s.value=B.response.docs})}function g(d){return n.value?d.replace(new RegExp(n.value,"gi"),i=>'<span class="highlightText">'+i+"</span>"):d}function f(d){if(!d||d=="")return"";const i=d.split("	");return{label:i[0],iri:i[2],ontology_prefix:i[1],type:i[3]}}function w(d){return d?d.join(""):""}return(d,i)=>(e.openBlock(),e.createElementBlock("div",K,[t.label?(e.openBlock(),e.createElementBlock("label",P,e.toDisplayString(t.label),1)):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("input",{type:"text",id:"search","onUpdate:modelValue":i[0]||(i[0]=o=>e.isRef(n)?n.value=o:n=o),onInput:e.withModifiers(c,["stop"]),placeholder:t.placeholder,class:e.normalizeClass(t.styling),autocomplete:"off"},null,42,W),[[e.vModelText,e.unref(n)]]),t.info&&e.unref(s).length==0?(e.openBlock(),e.createElementBlock("p",J,e.toDisplayString(t.info),1)):(e.openBlock(),e.createElementBlock("div",G,[e.createElementVNode("ul",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),o=>(e.openBlock(),e.createElementBlock("li",{key:o.short_label,role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":"3","aria-posinset":"0",onClick:v=>a(o)},[e.createElementVNode("p",{innerHTML:g(o.label)},null,8,Y),e.createElementVNode("p",null,[e.createElementVNode("small",{innerHTML:w(o.description)},null,8,Z)]),e.createElementVNode("small",null,e.toDisplayString(o.ontology_prefix)+":"+e.toDisplayString(o.iri),1)],8,X))),128))])])),e.unref(n)!=""&&e.unref(s).length>0?(e.openBlock(),e.createElementBlock("button",ee)):e.createCommentVNode("",!0)]))}}),oe=`[data-v-7c727e76]:root{--close-button: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18.984 6.422 13.406 12l5.578 5.578-1.406 1.406L12 13.406l-5.578 5.578-1.406-1.406L10.594 12 5.016 6.422l1.406-1.406L12 10.594l5.578-5.578z'/%3E%3C/svg%3E");--loupe-icon: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23929292' d='M16.041 15.856a.995.995 0 0 0-.186.186A6.97 6.97 0 0 1 11 18c-1.933 0-3.682-.782-4.95-2.05S4 12.933 4 11s.782-3.682 2.05-4.95S9.067 4 11 4s3.682.782 4.95 2.05S18 9.067 18 11a6.971 6.971 0 0 1-1.959 4.856zm5.666 4.437-3.675-3.675A8.967 8.967 0 0 0 20 11c0-2.485-1.008-4.736-2.636-6.364S13.485 2 11 2 6.264 3.008 4.636 4.636 2 8.515 2 11s1.008 4.736 2.636 6.364S8.515 20 11 20a8.967 8.967 0 0 0 5.618-1.968l3.675 3.675a.999.999 0 1 0 1.414-1.414z'/%3E%3C/svg%3E")}.auto-search-wrapper[data-v-7c727e76]{display:block;position:relative;width:100%}.auto-search-wrapper p[data-v-7c727e76]{margin:0;padding:0;font-size:1.1em}.auto-search-wrapper p .highlightText[data-v-7c727e76]{font-weight:700}.auto-search-wrapper input[data-v-7c727e76]{border:1px solid #d7d7d7;box-shadow:none;box-sizing:border-box;font-size:16px;padding:12px 45px 12px 10px;width:100%}.auto-search-wrapper input[data-v-7c727e76]:focus{border:1px solid #d7d7d7;outline:none}.auto-search-wrapper input[data-v-7c727e76]::-ms-clear{display:none}.auto-search-wrapper ul[data-v-7c727e76]{list-style:none;margin:0;overflow:auto;padding:0}.auto-search-wrapper ul li[data-v-7c727e76]{cursor:pointer;margin:0;overflow:hidden;padding:10px;position:relative;border:1px dotted #f1f1f2}.auto-search-wrapper ul li[data-v-7c727e76]:hover{background-color:#f1f1f2}.auto-search-wrapper ul li[data-v-7c727e76]:not(:last-child){border-top:none}.auto-search-wrapper ul li[disabled][data-v-7c727e76]{background:#ececec;opacity:.5;pointer-events:none}.auto-search-wrapper .auto-expanded[data-v-7c727e76]{border:1px solid #d7d7d7;outline:none}.auto-search-wrapper.loupe[data-v-7c727e76]:before{filter:invert(60%)}.auto-is-loading[data-v-7c727e76]:after{animation:auto-spinner-7c727e76 .6s linear infinite;border-color:#d9d9d9 grey grey #d9d9d9;border-radius:50%;border-style:solid;border-width:2px;bottom:0;box-sizing:border-box;content:"";height:20px;margin:auto;position:absolute;right:10px;top:0;width:20px}.auto-is-loading .auto-clear[data-v-7c727e76]{display:none}@keyframes auto-spinner-7c727e76{to{transform:rotate(1turn)}}li.loupe[data-v-7c727e76]:before{bottom:auto;top:15px}.loupe input[data-v-7c727e76]{padding:12px 45px 12px 35px}.loupe[data-v-7c727e76]:before{background-image:var(--loupe-icon);bottom:0;content:"";height:17px;left:10px;margin:auto;position:absolute;top:0;width:17px}.auto-selected[data-v-7c727e76]:before{opacity:1}.auto-clear[data-v-7c727e76]{align-items:center;background-color:transparent;border:none;bottom:0;cursor:pointer;display:flex;height:auto;justify-content:center;margin:auto;position:absolute;right:0;top:0;width:40px}.auto-clear[data-v-7c727e76]:before{content:var(--close-button);height:24px;line-height:100%;width:24px}.auto-clear span[data-v-7c727e76]{display:none}.auto-results-wrapper[data-v-7c727e76]{background-color:#fff;border:1px solid #d7d7d7;border-top:none;box-sizing:border-box;display:none;overflow:hidden}.auto-results-wrapper ul>.loupe[data-v-7c727e76]{padding-left:40px}.auto-results-wrapper.auto-is-active[data-v-7c727e76]{display:block;margin-top:-1px;position:absolute;width:100%;z-index:99999}.auto-selected[data-v-7c727e76]{background-color:#e6e6e6}.auto-selected+li[data-v-7c727e76]:before{border-top:none}.auto-error[data-v-7c727e76]{border:1px solid #ff3838}.auto-error[data-v-7c727e76]::placeholder{color:#f66;opacity:1}.hidden[data-v-7c727e76]{display:none}
`,ne=C(te,[["styles",[oe]],["__scopeId","data-v-7c727e76"]]),ae=t=>(e.pushScopeId("data-v-72d4acfd"),t=t(),e.popScopeId(),t),le=["id"],re={key:0,class:"o_annotate_label"},ie={key:1},se={key:2},ce={key:0,class:"contextmenu_item"},de={key:1},ue=["onClickCapture"],pe=["innerHTML"],fe={key:0,style:{float:"right"}},me=ae(()=>e.createElementVNode("i",null,"...loading",-1)),ge=[me],ve={key:0},he=e.defineComponent({__name:"ontology-annotate.ce",props:{label:{type:String,required:!1,default:""},info:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},ontologies:{type:String,required:!1,default:""},format:{type:String,required:!1,default:"text"}},emits:["change"],setup(t,{emit:p}){const u=t,a=(Math.random()+1).toString(36).substring(7),n=e.ref(null),s=e.ref(!1);let l=e.ref(""),r=e.ref({x:-1e3,y:0,start:-1,end:-1}),c=e.ref(""),g=e.ref(!1),f=e.ref([]),w=e.reactive([]);const d=new WeakMap,i=e.computed(()=>"left:"+r.value.x+"px; top:"+r.value.y+"px"),o=e.computed(()=>{let m=s?n.value?.value:l.value;return m?u.format&&u.format=="json"?{text:m,ontology:w}:m+`
$$$$
`+w.map(h=>h.ontology.type[0]+"	"+h.ontology.ontology_prefix+" "+h.context.start+" "+h.context.end+"	"+h.ontology.label+"	"+h.ontology.iri).join(`
`):null});e.onMounted(()=>{var m=document.getElementsByTagName("ontology-annotate")[0];m?.shadowRoot&&(s.value=!0)});function v(m){l.value=m.target.innerText,p("change",o.value)}function _(m){let h={ontology:{},context:{}};if(!s)h={ontology:m,context:r.value};else if(n){let b={x:0,y:0,start:n.value?.selectionStart,end:n.value?.selectionEnd};h={ontology:m,context:b}}w.push(h),f.value=[],c.value="",p("change",o.value)}function E(m){if(c.value="",window.getSelection){var h=window.getSelection();c.value=h?.toString(),c.value&&c.value!=""?(f.value=[],B(h),$(m)):(r.value={x:-1e3,y:0,start:-1,end:-1},f.value=[])}}function B(m,h=!0){if(!m?.rangeCount)return null;let b=m.getRangeAt(0).cloneRange();if(!b.getClientRects)return null;b.collapse(h);let k=b.getClientRects();if(k.length<=0)r.value.x=0,r.value.y=0;else{let y=k[0];r.value.start=m.anchorOffset,r.value.end=m.focusOffset,r.value.x=y.x,r.value.y=y.y+k[0]?.height}}async function $(m){if(c.value==="")return f.value=[],[];let h=c.value.indexOf(":"),b="",k=null;h<0?(b=u.ontologies,k=c.value):(k=c.value.split(":")[1],b=c.value.split(":")[0]);const y=m.currentTarget,x=d.get(y);x&&x.abort();const S=new AbortController;d.set(y,S);const V="https://service.tib.eu/ts4tib/api/select?q=",I=encodeURI("&ontolog-y="+b+"&fieldList=iri,label,short_form,obo_id,ontology_name,ontology_prefix,description,type&obsoletes=false&local=false&rows=10");g.value=!0,(await fetch(`${V}${k}${I}`,{signal:S.signal})).json().then(L=>{d.delete(y),f.value=L.response.docs,g.value=!1})}return(m,h)=>(e.openBlock(),e.createElementBlock("div",{id:"o_annotate_wrapper_"+e.unref(a),class:"o_annotate_wrapper"},[t.label?(e.openBlock(),e.createElementBlock("label",re,e.toDisplayString(t.label),1)):e.createCommentVNode("",!0),s.value?(e.openBlock(),e.createElementBlock("div",se,[e.createElementVNode("textarea",{ref_key:"o_annotate_textarea",ref:n,onMouseup:E,onKeyup:E,onInput:v,class:"o_annotate_textarea"},e.toDisplayString(e.unref(l)),545)])):(e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("div",{onMouseup:E,onKeyup:E,onInput:v,class:"o_annotate_textarea",ref:"o_annotate_div",contenteditable:"true"},e.toDisplayString(e.unref(l)),545)])),e.unref(c)!=""?(e.openBlock(),e.createElementBlock("div",{key:3,class:"contextmenu",style:e.normalizeStyle(e.unref(i))},[e.unref(f).length==0&&!e.unref(g)?(e.openBlock(),e.createElementBlock("div",ce,"No matches found")):(e.openBlock(),e.createElementBlock("div",de,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),b=>(e.openBlock(),e.createElementBlock("div",{class:"contextmenu_item",key:b.short_label,role:"option",tabindex:"_1",aria_selected:"false",aria_setsize:"3",aria_posinset:"0",onClickCapture:e.withModifiers(k=>_(b),["stop","prevent"])},[e.createElementVNode("p",{innerHTML:b.label},null,8,pe),e.createElementVNode("small",null,e.toDisplayString(b.ontology_prefix)+":"+e.toDisplayString(b.short_form),1)],40,ue))),128))]))],4)):e.createCommentVNode("",!0),e.createElementVNode("div",null,[e.unref(g)?(e.openBlock(),e.createElementBlock("div",fe,ge)):e.createCommentVNode("",!0),e.createElementVNode("div",null,[t.info?(e.openBlock(),e.createElementBlock("span",ve,e.toDisplayString(t.info),1)):e.createCommentVNode("",!0)])])],8,le))}}),ye=`.o_annotate_textarea[data-v-72d4acfd]{min-height:100px;width:100%;border:1px solid #d7d7d7;box-shadow:none;box-sizing:border_box;padding:12px 10px;resize:none}#mainInput[data-v-72d4acfd]{background:transparent;color:#000;opacity:1}.contextmenu[data-v-72d4acfd]{position:absolute;top:0;right:0;background:#ffffff;color:#000;border:1px solid #f1f1f2;width:15rem;max-width:calc(100vw _ 2rem);max-height:300px;overflow-y:scroll;overflow-x:hidden;z-index:100;box-shadow:0 .5rem 1.5rem #0003;border-radius:.2rem}.contextmenu .contextmenu_item[data-v-72d4acfd]{border-bottom:1px solid #c3c3c3;padding:8px}.contextmenu .contextmenu_item[data-v-72d4acfd]:hover{cursor:pointer;background-color:#f1f1f2}.contextmenu .contextmenu_item p[data-v-72d4acfd]{margin:0;padding:0}.contextmenu .contextmenu_item .iri[data-v-72d4acfd]{margin:0;width:15rem;white-space:nowrap;text-overflow:ellipsis;word-wrap:break_word;padding:0}
`,be=C(he,[["styles",[ye]],["__scopeId","data-v-72d4acfd"]]),xe={key:0},_e=["onKeyup","onChange"],ke={key:1},we={key:2},Ee={key:3},Se=e.defineComponent({__name:"ontology-compose.ce",props:{label:{type:String,required:!1,default:""},info:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},format:{type:String,required:!1,default:"text"}},emits:["change"],setup(t,{emit:p}){const u=t;let a=e.ref(""),n=e.ref(""),s=-1,l=100,r=0,c=e.ref([]),g="",f="",w=!1,d=e.ref([]),i=e.ref([]),o=e.ref(null);const v=e.computed(()=>o.value?o.value?o.value.label+"	"+o.value.ontology_prefix+"	"+o.value.iri+"	"+o.value.type:"":null),_=e.computed(()=>a.value?u.format&&u.format=="json"?{text:a.value,ontology:d.value}:a.value+`
$$$$
`+d.value.join(`
`):null);async function E(y){if(a.value==""){n.value="";return}if(s>-1&&clearTimeout(s),y.key=="ArrowDown"){r==9&&$(),r+=1,k(),y.preventDefault();return}else if(y.key=="ArrowUp"){r==0&&$(),r-=1,k(),y.preventDefault();return}else if(y.key=="ArrowRight")y.preventDefault(),h();else if(a.value){let x=a.value.split(" ");x.length>1?(g=x.slice(-1)[0],f=x.slice(-2).join(" ")):(g=x[0],f=g),g==""&&(w=!1,o.value=null,n.value=a.value),w&&(g=f),m()}}function B(){p("change",_.value)}function $(){w=!0,g=f,r=0,m()}function m(){s=setTimeout(function(){b()},l)}function h(){a.value=n.value,d.value.push(v.value),i.value.push(o.value)}async function b(){const y="https://service.tib.eu/ts4tib/api/select?q=",x=encodeURI("&obsoletes=false&local=false&rows=10");(await fetch(`${y}${g}${x}`)).json().then(V=>{c.value=V.response.docs,c.value.length>0&&(r=0,k())})}function k(){let y="";o.value=c.value[r],y=o.value.label;let x=y.toLowerCase().replace(g,"");x!=null&&(n.value=a.value+x)}return(y,x)=>(e.openBlock(),e.createElementBlock("div",null,[t.label?(e.openBlock(),e.createElementBlock("label",xe,e.toDisplayString(t.label),1)):e.createCommentVNode("",!0),e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":x[0]||(x[0]=S=>e.isRef(n)?n.value=S:n=S),id:"autocomplete",type:"text",class:"o_annotate_textarea",line:"10"},null,512),[[e.vModelText,e.unref(n)]]),e.withDirectives(e.createElementVNode("textarea",{id:"mainInput",onKeyup:e.withModifiers(E,["stop"]),onChange:e.withModifiers(B,["stop"]),"onUpdate:modelValue":x[1]||(x[1]=S=>e.isRef(a)?a.value=S:a=S),type:"text",class:"o_annotate_textarea"},null,40,_e),[[e.vModelText,e.unref(a)]])]),t.info&&e.unref(c).length==0?(e.openBlock(),e.createElementBlock("p",ke,e.toDisplayString(t.info),1)):e.createCommentVNode("",!0),e.unref(o)?(e.openBlock(),e.createElementBlock("span",we,[e.createElementVNode("code",null,[e.createElementVNode("pre",null,e.toDisplayString(e.unref(v)),1)])])):e.createCommentVNode("",!0),e.unref(d)&&e.unref(d).length>0?(e.openBlock(),e.createElementBlock("span",Ee,[e.createElementVNode("code",null,[e.createElementVNode("pre",null,e.toDisplayString(e.unref(_)),1)])])):e.createCommentVNode("",!0)]))}}),Be=`.o_annotate_textarea[data-v-030af0eb]{min-height:100px;width:100%;border:1px solid #d7d7d7;box-shadow:none;box-sizing:border-box;padding:12px 10px;resize:none}#mainInput[data-v-030af0eb]{background:transparent;color:#000;opacity:100}#autocomplete[data-v-030af0eb]{position:absolute;box-sizing:border-box;cursor:text;pointer-events:none;color:#000;opacity:.6;background:transparent}
`,$e=C(Se,[["styles",[Be]],["__scopeId","data-v-030af0eb"]]),Ce=t=>(e.pushScopeId("data-v-3f293147"),t=t(),e.popScopeId(),t),Ve={key:0,tabindex:"0",role:"listbox"},Te=Ce(()=>e.createElementVNode("br",null,null,-1)),Ne={style:{"padding-left":"22px",color:"#858484"}},Oe={key:0},qe={tabindex:"0",role:"listbox"},ze={role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":"3","aria-posinset":"0"},Me=e.defineComponent({__name:"ontology-tree.ce",props:{doc:{type:Object,required:!0,default:{}}},emits:["selected"],setup(t,{emit:p}){const u=t;e.ref("");const a=s=>{s&&p("selected",s)};async function n(s){const l=s._links.children.href;(await fetch(`${l}`)).json().then(c=>{u.doc.children=c._embedded.terms})}return(s,l)=>t.doc?(e.openBlock(),e.createElementBlock("span",Ve,[(e.openBlock(),e.createElementBlock("li",{key:t.doc.label,role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":"3","aria-posinset":"0"},[e.createElementVNode("span",{onClick:l[0]||(l[0]=r=>n(t.doc)),class:e.normalizeClass([t.doc.has_children?"caret":"nocaret"])},null,2),e.createElementVNode("span",{style:{"text-transform":"capitalize"},onClick:l[1]||(l[1]=r=>a(t.doc))},e.toDisplayString(t.doc.label),1),Te,e.createElementVNode("p",Ne,[e.createElementVNode("small",null,e.toDisplayString(t.doc.ontology_prefix)+":"+e.toDisplayString(t.doc.iri),1)]),t.doc.children&&t.doc.children.length>0?(e.openBlock(),e.createElementBlock("span",Oe,[e.createElementVNode("ul",qe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.doc.children,r=>(e.openBlock(),e.createElementBlock("span",ze,[e.createVNode(T,{onSelected:l[2]||(l[2]=c=>a(c)),doc:r},null,8,["doc"])]))),256))])])):e.createCommentVNode("",!0)]))])):e.createCommentVNode("",!0)}}),De=`ul[data-v-3f293147]{padding-left:10px!important}li[data-v-3f293147]{border:none!important}.nocaret[data-v-3f293147]{margin-right:23px}.caret[data-v-3f293147]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.caret[data-v-3f293147]:before{content:"⇢";color:#000;display:inline-block;margin-right:6px}.caret-down[data-v-3f293147]:before{-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.nested[data-v-3f293147]{display:none}.active[data-v-3f293147]{display:block}
`,T=C(Me,[["styles",[De]],["__scopeId","data-v-3f293147"]]),Ie={class:"auto-search-wrapper"},Le={key:0},je=["onInput","placeholder"],Ae={key:1,class:"auto-results-wrapper auto-is-active"},Re={tabindex:"0",role:"listbox"},Ue={role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":"3","aria-posinset":"0"},He={key:2},Fe={key:3,type:"button","aria-label":"clear the search query"},Ke=e.defineComponent({__name:"ontology-select.ce",props:{label:{type:String,required:!1,default:""},info:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},ontology:{type:String,required:!1,default:""},value:{type:String,required:!1,default:""},styling:{type:String,required:!1,default:""},format:{type:String,required:!1,default:"text"}},emits:["change"],setup(t,{emit:p}){const u=t;let a=e.ref(""),n=e.ref([]),s=e.ref([]),l=e.ref(null),r=e.ref(!1);const c=i=>{i==""?(l.value=null,a.value=""):(l.value=i,a.value=i.label,p("change",g.value),s.value=[],r.value=!1)},g=e.computed(()=>l.value?(console.log(l.value.type),u.format&&u.format=="json"?l.value:l.value?l.value.label+"	"+l.value.ontology_prefix+"	"+l.value.iri+"	"+(l.value.type?l.value.type:""):""):null);e.watch(()=>u.value,i=>{c(d(i))}),e.onMounted(()=>{f()});async function f(){const i="https://service.tib.eu/ts4tib/api/ontologies/",o=encodeURI("/terms/roots?includeObsoletes=false");(await fetch(`${i}${u.ontology}${o}`)).json().then(_=>{n.value=_._embedded.terms})}async function w(){if(a.value==="")return s.value=[],[];let i=a.value.indexOf(":"),o="",v=null;i<0?(o=u.ontology,v=a.value):(v=a.value.split(":")[1],o=a.value.split(":")[0]);const _="https://service.tib.eu/ts4tib/api/select?q=",E=encodeURI("&ontology="+o+"&fieldList=iri,label,short_form,obo_id,ontology_name,ontology_prefix,description,type&obsoletes=false&local=false&rows=10");(await fetch(`${_}${v}${E}`)).json().then($=>{s.value=$.response.docs})}function d(i){if(!i||i=="")return"";const o=i.split("	");return{label:o[0],iri:o[2],ontology_prefix:o[1],type:o[3]}}return(i,o)=>(e.openBlock(),e.createElementBlock("div",Ie,[t.label?(e.openBlock(),e.createElementBlock("label",Le,e.toDisplayString(t.label),1)):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("input",{type:"text",id:"search","onUpdate:modelValue":o[0]||(o[0]=v=>e.isRef(a)?a.value=v:a=v),onInput:e.withModifiers(w,["stop"]),onFocusin:o[1]||(o[1]=v=>e.isRef(r)?r.value=!0:r=!0),placeholder:t.placeholder,class:e.normalizeClass(t.styling),autocomplete:"off"},null,42,je),[[e.vModelText,e.unref(a)]]),e.unref(n).length>0&&e.unref(r)?(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("ul",Re,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),v=>(e.openBlock(),e.createElementBlock("span",Ue,[e.createVNode(T,{doc:v,onSelected:o[2]||(o[2]=_=>c(_))},null,8,["doc"])]))),256))])])):(e.openBlock(),e.createElementBlock("div",He,[e.createElementVNode("p",null,e.toDisplayString(t.info),1)])),e.unref(a)!=""&&e.unref(s).length>0?(e.openBlock(),e.createElementBlock("button",Fe)):e.createCommentVNode("",!0)]))}}),Pe=`[data-v-2313ef2f]:root{--close-button: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18.984 6.422 13.406 12l5.578 5.578-1.406 1.406L12 13.406l-5.578 5.578-1.406-1.406L10.594 12 5.016 6.422l1.406-1.406L12 10.594l5.578-5.578z'/%3E%3C/svg%3E");--loupe-icon: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23929292' d='M16.041 15.856a.995.995 0 0 0-.186.186A6.97 6.97 0 0 1 11 18c-1.933 0-3.682-.782-4.95-2.05S4 12.933 4 11s.782-3.682 2.05-4.95S9.067 4 11 4s3.682.782 4.95 2.05S18 9.067 18 11a6.971 6.971 0 0 1-1.959 4.856zm5.666 4.437-3.675-3.675A8.967 8.967 0 0 0 20 11c0-2.485-1.008-4.736-2.636-6.364S13.485 2 11 2 6.264 3.008 4.636 4.636 2 8.515 2 11s1.008 4.736 2.636 6.364S8.515 20 11 20a8.967 8.967 0 0 0 5.618-1.968l3.675 3.675a.999.999 0 1 0 1.414-1.414z'/%3E%3C/svg%3E")}ul[data-v-2313ef2f],#myUL[data-v-2313ef2f]{list-style-type:none;padding-left:10px}#myUL[data-v-2313ef2f]{margin:0;padding:0}.caret[data-v-2313ef2f]:before{content:"▶";color:#000;display:inline-block;margin-right:6px}.auto-search-wrapper[data-v-2313ef2f]{display:block;position:relative;width:100%}.auto-search-wrapper p[data-v-2313ef2f]{margin:0;padding:0;font-size:1.1em}.auto-search-wrapper p .highlightText[data-v-2313ef2f]{font-weight:700}.auto-search-wrapper input[data-v-2313ef2f]{border:1px solid #d7d7d7;box-shadow:none;box-sizing:border-box;font-size:16px;padding:12px 45px 12px 10px;width:100%}.auto-search-wrapper input[data-v-2313ef2f]:focus{border:1px solid #d7d7d7;outline:none}.auto-search-wrapper input[data-v-2313ef2f]::-ms-clear{display:none}.auto-search-wrapper ul[data-v-2313ef2f]{list-style:none;margin:0;overflow:auto;padding:0}.auto-search-wrapper ul li[data-v-2313ef2f]{cursor:pointer;margin:0;overflow:hidden;padding:10px;position:relative;border:1px dotted #f1f1f2}.auto-search-wrapper ul li[data-v-2313ef2f]:hover{background-color:#f1f1f2}.auto-search-wrapper ul li[data-v-2313ef2f]:not(:last-child){border-top:none}.auto-search-wrapper ul li[disabled][data-v-2313ef2f]{background:#ececec;opacity:.5;pointer-events:none}.auto-search-wrapper .auto-expanded[data-v-2313ef2f]{border:1px solid #d7d7d7;outline:none}.auto-search-wrapper.loupe[data-v-2313ef2f]:before{filter:invert(60%)}.auto-is-loading[data-v-2313ef2f]:after{animation:auto-spinner-2313ef2f .6s linear infinite;border-color:#d9d9d9 grey grey #d9d9d9;border-radius:50%;border-style:solid;border-width:2px;bottom:0;box-sizing:border-box;content:"";height:20px;margin:auto;position:absolute;right:10px;top:0;width:20px}.auto-is-loading .auto-clear[data-v-2313ef2f]{display:none}@keyframes auto-spinner-2313ef2f{to{transform:rotate(1turn)}}li.loupe[data-v-2313ef2f]:before{bottom:auto;top:15px}.loupe input[data-v-2313ef2f]{padding:12px 45px 12px 35px}.loupe[data-v-2313ef2f]:before{background-image:var(--loupe-icon);bottom:0;content:"";height:17px;left:10px;margin:auto;position:absolute;top:0;width:17px}.auto-selected[data-v-2313ef2f]:before{opacity:1}.auto-clear[data-v-2313ef2f]{align-items:center;background-color:transparent;border:none;bottom:0;cursor:pointer;display:flex;height:auto;justify-content:center;margin:auto;position:absolute;right:0;top:0;width:40px}.auto-clear[data-v-2313ef2f]:before{content:var(--close-button);height:24px;line-height:100%;width:24px}.auto-clear span[data-v-2313ef2f]{display:none}.auto-results-wrapper[data-v-2313ef2f]{background-color:#fff;border:1px solid #d7d7d7;border-top:none;box-sizing:border-box;display:none;overflow:hidden}.auto-results-wrapper ul>.loupe[data-v-2313ef2f]{padding-left:40px}.auto-results-wrapper.auto-is-active[data-v-2313ef2f]{display:block;margin-top:-1px;position:absolute;width:100%;z-index:99999}.auto-selected[data-v-2313ef2f]{background-color:#e6e6e6}.auto-selected+li[data-v-2313ef2f]:before{border-top:none}.auto-error[data-v-2313ef2f]{border:1px solid #ff3838}.auto-error[data-v-2313ef2f]::placeholder{color:#f66;opacity:1}.hidden[data-v-2313ef2f]{display:none}.icon[data-v-2313ef2f]{height:1em;width:1em;margin-bottom:2px;cursor:pointer;fill:#d7d7d7}.icon[data-v-2313ef2f]:hover{fill:#666}.caret[data-v-2313ef2f]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.caret[data-v-2313ef2f]:before{content:"⇢";color:#000;display:inline-block;margin-right:6px}.caret-down[data-v-2313ef2f]:before{-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.nested[data-v-2313ef2f]{display:none}.active[data-v-2313ef2f]{display:block}
`,We=C(Ke,[["styles",[Pe]],["__scopeId","data-v-2313ef2f"]]),N=e.defineCustomElement(A),O=e.defineCustomElement(F),q=e.defineCustomElement(ne),z=e.defineCustomElement(be),M=e.defineCustomElement($e),D=e.defineCustomElement(We);if(typeof window<"u"){let t=window.customElements;t.define("ontology-term-annotation",N),t.define("ontology-text-annotation",O),t.define("ontology-autocomplete",q),t.define("ontology-annotate",z),t.define("ontology-compose",M),t.define("ontology-select",D)}exports.OntologyAnnotate=z;exports.OntologyAutoComplete=q;exports.OntologyCompose=M;exports.OntologySelect=D;exports.OntologyTermAnnotation=N;exports.OntologyTextAnnotation=O;
//# sourceMappingURL=index.cjs.map
